<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 5.12.4"/><style data-href="/styles.9dd284e57ee2f43e6ebe.css" data-identity="gatsby-global-css">/*
! tailwindcss v3.3.3 | MIT License | https://tailwindcss.com
*/*,:after,:before{border:0 solid #e5e7eb;box-sizing:border-box}:after,:before{--tw-content:""}html{-webkit-text-size-adjust:100%;font-feature-settings:normal;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-variation-settings:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4}body{line-height:inherit;margin:0}hr{border-top-width:1px;color:inherit;height:0}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{border-collapse:collapse;border-color:inherit;text-indent:0}button,input,optgroup,select,textarea{font-feature-settings:inherit;color:inherit;font-family:inherit;font-size:100%;font-variation-settings:inherit;font-weight:inherit;line-height:inherit;margin:0;padding:0}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0}fieldset,legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:#9ca3af;opacity:1}input::placeholder,textarea::placeholder{color:#9ca3af;opacity:1}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{height:auto;max-width:100%}[hidden]{display:none}h1{font-size:3rem;line-height:1}h2{font-size:2.25rem;line-height:2.5rem}h3{font-size:1.875rem;line-height:2.25rem}h4{font-size:1.5rem;line-height:2rem}menu,ol,ul{list-style-type:disc;padding-left:1.5rem;padding-right:1.5rem}p a{--tw-text-opacity:1;color:rgb(249 168 212/var(--tw-text-opacity))}div p{margin-bottom:1rem;margin-top:1rem}*,:after,:before{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }.sticky{position:sticky}.top-0{top:0}.z-10{z-index:10}.mx-2{margin-left:.5rem;margin-right:.5rem}.my-4{margin-bottom:1rem;margin-top:1rem}.flex{display:flex}.hidden{display:none}.h-full{height:100%}.min-h-screen{min-height:100vh}.w-6\/12{width:50%}.w-96{width:24rem}.w-full{width:100%}.snap-y{scroll-snap-type:y var(--tw-scroll-snap-strictness)}.snap-mandatory{--tw-scroll-snap-strictness:mandatory}.flex-row{flex-direction:row}.flex-col{flex-direction:column}.items-center{align-items:center}.justify-center{justify-content:center}.rounded-full{border-radius:9999px}.rounded-md{border-radius:.375rem}.bg-\[\#3d3d5e\]{--tw-bg-opacity:1;background-color:rgb(61 61 94/var(--tw-bg-opacity))}.bg-\[\#5c5d9c\]{--tw-bg-opacity:1;background-color:rgb(92 93 156/var(--tw-bg-opacity))}.bg-\[\#7f81e9\]{--tw-bg-opacity:1;background-color:rgb(127 129 233/var(--tw-bg-opacity))}.p-2{padding:.5rem}.p-4{padding:1rem}.px-10{padding-left:2.5rem;padding-right:2.5rem}.px-4{padding-left:1rem;padding-right:1rem}.py-4{padding-bottom:1rem;padding-top:1rem}.text-center{text-align:center}.text-2xl{font-size:1.5rem;line-height:2rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-white{--tw-text-opacity:1;color:rgb(255 255 255/var(--tw-text-opacity))}.shadow-lg{--tw-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -4px rgba(0,0,0,.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color),0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.shadow-indigo-900\/40{--tw-shadow-color:rgba(49,46,129,.4);--tw-shadow:var(--tw-shadow-colored)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}@media (min-width:768px){.md\:flex{display:flex}.md\:hidden{display:none}.md\:px-24{padding-left:6rem;padding-right:6rem}}@media (min-width:1280px){.xl\:px-80{padding-left:20rem;padding-right:20rem}}@media (min-width:1536px){.\32xl\:px-96{padding-left:24rem;padding-right:24rem}}code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#000;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;-webkit-hyphens:none;hyphens:none;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;text-align:left;white-space:pre;word-break:normal;word-spacing:normal}pre[class*=language-]{background-color:#fdfdfd;background-image:linear-gradient(transparent 50%,rgba(23,65,104,.083) 0);background-origin:content-box;background-size:3em 3em;box-shadow:-1px 0 0 0 #358ccb,0 0 0 1px #dfdfdf;margin:.5em 0;overflow:visible;padding:0;position:relative}code[class*=language]{display:block;height:100%;max-height:inherit;overflow:auto;padding:0 1em}:not(pre)>code[class*=language-],pre[class*=language-]{background-color:#fdfdfd;box-sizing:border-box;margin-bottom:1em}:not(pre)>code[class*=language-]{border:1px solid rgba(0,0,0,.1);border-radius:.3em;color:#c92c2c;display:inline;padding:.2em;position:relative;white-space:normal}pre[class*=language-]:after,pre[class*=language-]:before{bottom:.75em;box-shadow:0 13px 8px #979797;content:"";display:block;height:20%;left:.18em;max-height:13em;position:absolute;transform:rotate(-2deg);width:40%;z-index:-2}:not(pre)>code[class*=language-]:after,pre[class*=language-]:after{left:auto;right:.75em;transform:rotate(2deg)}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#7d8b99}.token.punctuation{color:#5f6364}.token.boolean,.token.constant,.token.deleted,.token.function-name,.token.number,.token.property,.token.symbol,.token.tag{color:#c92c2c}.token.attr-name,.token.builtin,.token.char,.token.function,.token.inserted,.token.selector,.token.string{color:#2f9c0a}.token.entity,.token.operator,.token.url,.token.variable{background:hsla(0,0%,100%,.5);color:#a67f59}.token.atrule,.token.attr-value,.token.class-name,.token.keyword{color:#1990b8}.token.important,.token.regex{color:#e90}.language-css .token.string,.style .token.string{background:hsla(0,0%,100%,.5);color:#a67f59}.token.important{font-weight:400}.token.bold{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.namespace{opacity:.7}@media screen and (max-width:767px){pre[class*=language-]:after,pre[class*=language-]:before{bottom:14px;box-shadow:none}}.token.cr:before,.token.lf:before,.token.tab:not(:empty):before{color:#e0d7d1}pre[class*=language-].line-numbers{padding-left:0}pre[class*=language-].line-numbers .line-numbers-rows{left:0}pre[class*=language-][data-line]{padding-bottom:0;padding-left:0;padding-top:0}pre[data-line] code{padding-left:4em;position:relative}pre .line-highlight{margin-top:0}a.sourceLine{color:inherit;display:inline-block;line-height:1.25;pointer-events:none;text-decoration:inherit}a.sourceLine:empty{height:1.2em}.sourceCode{overflow:visible}code.sourceCode{position:relative;white-space:pre}div.sourceCode{margin:1em 0}pre.sourceCode{margin:0}@media screen{div.sourceCode{overflow:auto}}@media print{code.sourceCode{white-space:pre-wrap}a.sourceLine{padding-left:1em;text-indent:-1em}}pre.numberSource a.sourceLine{left:-4em;position:relative}pre.numberSource a.sourceLine:before{-webkit-touch-callout:none;border:none;color:#aaa;content:attr(title);display:inline-block;left:-1em;padding:0 4px;pointer-events:all;position:relative;text-align:right;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:baseline;width:4em}pre.numberSource{border-left:1px solid #aaa;margin-left:3em;padding-left:4px}div.sourceCode{background-color:#eee;padding:4px}@media screen{a.sourceLine:before{text-decoration:underline}}code span.al{color:red;font-weight:700}code span.an{color:#60a0b0;font-style:italic;font-weight:700}code span.at{color:#7d9029}code span.bn{color:#40a070}code span.cf{color:#007020;font-weight:700}code span.ch{color:#4070a0}code span.cn{color:#800}code span.co,code span.cv{color:#60a0b0;font-style:italic}code span.cv{font-weight:700}code span.do{color:#ba2121;font-style:italic}code span.dt{color:#902000}code span.dv{color:#40a070}code span.er{color:red;font-weight:700}code span.fl{color:#40a070}code span.fu{color:#06287e}code span.in{color:#60a0b0;font-style:italic;font-weight:700}code span.kw{color:#007020;font-weight:700}code span.op{color:#666}code span.ot{color:#007020}code span.pp{color:#bc7a00}code span.sc{color:#4070a0}code span.ss{color:#b68}code span.st{color:#4070a0}code span.va{color:#19177c}code span.vs{color:#4070a0}code span.wa{color:#60a0b0;font-style:italic;font-weight:700}</style><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link rel="sitemap" type="application/xml" href="/sitemap-index.xml"/><title data-gatsby-head="true">J&#x27;ai réalisé une todo list en react | HellpiM&#x27;s awesome portfolio</title></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="bg-[#5c5d9c] text-white h-full min-h-screen" id="top"><div class="bg-[#3d3d5e] text-2xl py-4 sticky top-0 z-10"><div class="md:hidden"><div class="text-xl text-center"><span class="px-4 text-2xl">☰</span></div></div><div class="hidden md:flex flex-row justify-center"><div class="mx-2"><a href="/"><span>Accueil</span></a></div><span>|</span><div class="mx-2"><a href="/blog/"><span>Blog</span></a></div><span>|</span><div class="mx-2"><a href="/projects/"><span>Projets</span></a></div></div></div><header class="bg-[#5c5d9c] p-4 text-center text-2xl">HellpiM&#x27;s awesome portfolio</header><main class="p-4 bg-[#5c5d9c] md:px-24 xl:px-80 2xl:px-96"><h1 class="text-center">J&#x27;ai réalisé une todo list en react</h1><p>February 26, 2024</p><hr/><div class="flex flex-row justify-center"><div><div data-gatsby-image-wrapper="" class="gatsby-image-wrapper gatsby-image-wrapper-constrained"><div style="max-width:467px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg%20height=&#x27;365&#x27;%20width=&#x27;467&#x27;%20xmlns=&#x27;http://www.w3.org/2000/svg&#x27;%20version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#f8f8f8;position:absolute;top:0;left:0;bottom:0;right:0"></div><picture><source type="image/webp" data-srcset="/static/fa8e42f0e34427d6cb6a507ab5cd30fe/a3ec4/todo.webp 117w,/static/fa8e42f0e34427d6cb6a507ab5cd30fe/22a83/todo.webp 234w,/static/fa8e42f0e34427d6cb6a507ab5cd30fe/f615e/todo.webp 467w" sizes="(min-width: 467px) 467px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 467px) 467px, 100vw" decoding="async" loading="lazy" data-src="/static/fa8e42f0e34427d6cb6a507ab5cd30fe/cc42f/todo.png" data-srcset="/static/fa8e42f0e34427d6cb6a507ab5cd30fe/a3f37/todo.png 117w,/static/fa8e42f0e34427d6cb6a507ab5cd30fe/85066/todo.png 234w,/static/fa8e42f0e34427d6cb6a507ab5cd30fe/cc42f/todo.png 467w" alt="Une todolist"/></picture><noscript><picture><source type="image/webp" srcSet="/static/fa8e42f0e34427d6cb6a507ab5cd30fe/a3ec4/todo.webp 117w,/static/fa8e42f0e34427d6cb6a507ab5cd30fe/22a83/todo.webp 234w,/static/fa8e42f0e34427d6cb6a507ab5cd30fe/f615e/todo.webp 467w" sizes="(min-width: 467px) 467px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 467px) 467px, 100vw" decoding="async" loading="lazy" src="/static/fa8e42f0e34427d6cb6a507ab5cd30fe/cc42f/todo.png" srcSet="/static/fa8e42f0e34427d6cb6a507ab5cd30fe/a3f37/todo.png 117w,/static/fa8e42f0e34427d6cb6a507ab5cd30fe/85066/todo.png 234w,/static/fa8e42f0e34427d6cb6a507ab5cd30fe/cc42f/todo.png 467w" alt="Une todolist"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div></div></div><div><h2>Introduction</h2>
<p>Pour cet article, j&#x27;ai décidé de parler d&#x27;un projet assez commun à faire quand on veut apprendre
une nouvelle technologie, à savoir la réalisation d&#x27;une todo list. Cet exercice est assez populaire
de par sa simplicité, qui permet néamoins de visiter quelques concepts clés comme la gestion
d&#x27;éléments multiples.</p>
<p>Pour autant durant mes presque 12 ans de pratique je ne l&#x27;avais jamais réalisé. Aussi ai-je
récemment décidé d&#x27;y palier, en utilisant la bibliothèque react. Je vais partager les différents choix
que j&#x27;ai pu faire, en espérant que cela puisse vous inspirer !</p>
<h2>Usage de useImmer</h2>
<p><span><code class="language-text">Immerjs</code></span> est une bibliothèque permettant de manipuler des structures de façon immutable avec du code à mutation. C&#x27;est à
dire que l&#x27;on va muter un objet fourni par immer qui va enregistrer les modifications qu&#x27;on lui apporte pour générer un
nouvel objet contenant ces modification. Cela évite d&#x27;avoir à cloner sa state pour pouvoir la muter après, ce qui alège
grandement le code ! Pour useImmer, il s&#x27;agit d&#x27;un hook semblable à <span><code class="language-text">useState</code></span> surlequel immer a été
branché. Il renvoie la même paire <span><code class="language-text">[state, setState]</code></span> où <span><code class="language-text">setState</code></span> prend la fonction de mise à jour que l&#x27;on fournirait
à immer. Pour vous donner une idée plus précise, vous un exemple de code dans ma todo list:</p>
<span><div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript"><span class="token keyword">const</span> <span class="token punctuation">[</span>todos<span class="token punctuation">,</span> setTodos<span class="token punctuation">]</span> <span class="token operator">=</span> useImmer<span class="token operator">&lt;</span>Array<span class="token operator">&lt;</span>Todo<span class="token operator">>></span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Un peu plus lin dans le code...</span>
<span class="token function">setTodos</span><span class="token punctuation">(</span><span class="token parameter">draft</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> todoChanging <span class="token operator">=</span> draft<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">todo</span> <span class="token operator">=></span> todo<span class="token punctuation">.</span>id <span class="token operator">===</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>todoChanging<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    todoChanging<span class="token punctuation">.</span>completed <span class="token operator">=</span> <span class="token operator">!</span>todoChanging<span class="token punctuation">.</span>completed<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div></span>
<h2>Fonction de filtrage des todos</h2>
<p>En plus d&#x27;afficher mes todo, j&#x27;ai décidé de les séparer selon qu&#x27;ils soient complets ou non pour mettre les todos complétés
en dessous des autres. J&#x27;aurais pu pour cela utiliser filter deux fois, une pour ne garder que les incomplet puis une pour
garder les complets et afficher les deux l&#x27;un après l&#x27;autre. Mais cela voulais dire parcourir deux fois la liste de todos,
ce qui n&#x27;est pas très optimal quand la liste grandit. À la place j&#x27;ai préféré faire une fonction nouivelle de filtrage qui
ne rejette pas de valeur mais va plutôt séparer mobn array en deux arrays, un pour ce que je garde et un pour ce que je rejette.</p>
<p>Voici mon code :</p>
<span><div class="gatsby-highlight" data-language="typescript"><pre style="counter-reset: linenumber NaN" class="language-typescript line-numbers"><code class="language-typescript"><span class="token keyword">interface</span> <span class="token class-name">Separation<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span></span> <span class="token punctuation">{</span>
  kept<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">;</span>
  rejected<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token generic-function"><span class="token function">separate</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>values<span class="token operator">:</span><span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">,</span> <span class="token function-variable function">callback</span><span class="token operator">:</span> <span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token builtin">boolean</span><span class="token punctuation">)</span><span class="token operator">:</span> Separation<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> result<span class="token operator">:</span> Separation<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">{</span>kept<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> rejected<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">}</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> value <span class="token keyword">of</span> values<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">callback</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      result<span class="token punctuation">.</span>kept<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      result<span class="token punctuation">.</span>rejected<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div></span>
<p>Rien de bien compliqué ici, je crée un objet avec deux arrays vides en propriétés et j&#x27;inère chaque valeur dans l&#x27;un ou
l&#x27;autre, avant de retourner le résultat.</p>
<h2>Fonctions d&#x27;ordre suppérieur</h2>
<p>Pour les différents événements d&#x27;un todo, j&#x27;ai fait le choix d&#x27;externaliser les fonction en la plaçant en dehors du jsx.
Comme j&#x27;affiche plusieurs todo, j&#x27;utilise la méthode map sur l&#x27;array de todos pour générer la liste dans mon jsx. Petit
problème : j&#x27;ai besoin de savoir quel todo je veux modifier ou supprimer dans la fonction de manipulation, et je ne peux
pas la passer en paramètre.</p>
<span><div class="gatsby-highlight" data-language="jsx"><pre style="counter-reset: linenumber NaN" class="language-jsx line-numbers"><code class="language-jsx"><span class="token keyword">const</span> <span class="token function-variable function">editTodo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">setTodos</span><span class="token punctuation">(</span><span class="token parameter">draft</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> todoChanging <span class="token operator">=</span> draft<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">todo</span> <span class="token operator">=></span> todo<span class="token punctuation">.</span>id <span class="token operator">===</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// comment récupérer l'id ?</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>todoChanging<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      todoChanging<span class="token punctuation">.</span>name <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div></span>
<p>Pour y palier j&#x27;utilise une fonction de premier ordre, c&#x27;est à dire une fonction qui va prendre l&#x27;id en paramètre et me
construit une fonction d&#x27;événement qui peut ensuite l&#x27;utiliser.</p>
<span><div class="gatsby-highlight" data-language="jsx"><pre style="counter-reset: linenumber NaN" class="language-jsx line-numbers"><code class="language-jsx"><span class="token keyword">const</span> editTodo <span class="token operator">=</span> <span class="token punctuation">(</span>id<span class="token operator">:</span> number<span class="token punctuation">)</span><span class="token operator">:</span> React<span class="token punctuation">.</span>ChangeEventHandler<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">HTMLInputElement</span></span><span class="token punctuation">></span></span><span class="token plain-text"> => (e) => </span><span class="token punctuation">{</span>
  <span class="token function">setTodos</span><span class="token punctuation">(</span><span class="token parameter">draft</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> todoChanging <span class="token operator">=</span> draft<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">todo</span> <span class="token operator">=></span> todo<span class="token punctuation">.</span>id <span class="token operator">===</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>todoChanging<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      todoChanging<span class="token punctuation">.</span>name <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div></span>
<p>On peut le voir avec l&#x27;ajout de la première ligne <span><code class="language-text">(id: number): React.ChangeEventHandler&lt;HTMLInputElement> =></code></span>, editTodo
ne correspond plus à l&#x27;événement en lui-même mais une fonction retournant un <span><code class="language-text">React.ChangeEventHandler&lt;HTMLInputElement></code></span>.</p>
<p>Ma fonction s&#x27;utilise alors comme ceci :</p>
<span><div class="gatsby-highlight" data-language="jsx"><pre style="counter-reset: linenumber NaN" class="language-jsx line-numbers"><code class="language-jsx"><span class="token punctuation">{</span>filteredTodos<span class="token punctuation">.</span>rejected<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">todo</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>todo<span class="token punctuation">.</span>id<span class="token punctuation">}</span></span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>todo<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">
    </span><span class="token punctuation">{</span>todo<span class="token punctuation">.</span>id <span class="token operator">===</span> edit <span class="token operator">?</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token function">editTodo</span><span class="token punctuation">(</span>todo<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">}</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>todo<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span> <span class="token operator">:</span> todo<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token function">editButton</span><span class="token punctuation">(</span>todo<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">}</span></span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token punctuation">{</span>todo<span class="token punctuation">.</span>id <span class="token operator">===</span> edit <span class="token operator">?</span> <span class="token string">"Finish"</span> <span class="token operator">:</span> <span class="token string">"Edit"</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text">
    </span><span class="token punctuation">{</span>todo<span class="token punctuation">.</span>id <span class="token operator">!==</span> edit <span class="token operator">&amp;&amp;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token function">swapTodo</span><span class="token punctuation">(</span>todo<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">}</span></span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token punctuation">{</span>todo<span class="token punctuation">.</span>completed <span class="token operator">?</span> <span class="token string">"Undo"</span> <span class="token operator">:</span> <span class="token string">"Complete"</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token punctuation">}</span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div></span>
<p>On peut voir ligne 3 l&#x27;usage de <span><code class="language-text">editTodo</code></span> : la fonction est appelée avec en paramètre le todo courant de la fonction passée
à map, ce qui renvoi l&#x27;événement attaché au onChange`.</p>
<h2>Conclusion</h2>
<p>Voilà donc pour cet article. Si l&#x27;exercice en lui-même est assez simple et passe partout je l&#x27;ai tout de même trouvé assez
intéressant et cela m&#x27;a permi de réfléchir à des points auquels je n&#x27;avait pas forcément pensé de prime abord. Je compte
continuer les exercices de code de ce genre dans un repo à part. Je n&#x27;ai pas encore publié, mais promis dès que c&#x27;est le cas
je modifie cet article pour partager son code !</p></div></main></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/react-todolist/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-7c0d947bc2d56bc3aab9.js\"],\"component---src-pages-404-tsx\":[\"/component---src-pages-404-tsx-06f1f15d312b8d6ffcad.js\"],\"component---src-pages-blog-index-tsx\":[\"/component---src-pages-blog-index-tsx-5f307a0b15633c3af047.js\"],\"component---src-pages-blog-mdx-frontmatter-slug-tsx-content-file-path-blog-php-poo-index-mdx\":[\"/component---src-pages-blog-mdx-frontmatter-slug-tsx-content-file-path-blog-php-poo-index-mdx-ce4cf29b5ede6f0afb68.js\"],\"component---src-pages-blog-mdx-frontmatter-slug-tsx-content-file-path-blog-react-todolist-index-mdx\":[\"/component---src-pages-blog-mdx-frontmatter-slug-tsx-content-file-path-blog-react-todolist-index-mdx-7d2fab30ba4d5da33c17.js\"],\"component---src-pages-blog-mdx-frontmatter-slug-tsx-content-file-path-blog-remaking-java-switch-index-mdx\":[\"/component---src-pages-blog-mdx-frontmatter-slug-tsx-content-file-path-blog-remaking-java-switch-index-mdx-9b7ddfd0f3b13ca4db0c.js\"],\"component---src-pages-index-tsx\":[\"/component---src-pages-index-tsx-727affce2bad1e253519.js\"],\"component---src-pages-projects-index-tsx\":[\"/component---src-pages-projects-index-tsx-681ddf358fd0c21a1eb5.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="7e5b46a8b9c88c1b9559";</script><script src="/webpack-runtime-f5cc40ef121506246c7a.js" async></script><script src="/framework-e817803d957448322269.js" async></script><script src="/app-7c0d947bc2d56bc3aab9.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>